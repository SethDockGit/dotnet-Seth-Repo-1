{"ast":null,"code":"var _jsxFileName = \"C:\\\\repos\\\\Seth repo share\\\\dotnet-Seth-Repo-1\\\\BnbProject\\\\BnbWebAPI\\\\BnbWebsite\\\\src\\\\Components\\\\Listing\\\\Listing.js\",\n  _s = $RefreshSig$();\nimport { Divider, Typography } from \"@mui/material\";\nimport Grid from '@mui/material/Unstable_Grid2';\nimport { useState } from \"react\";\nimport Button from \"@mui/material/Button\";\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport IconButton from '@mui/material/IconButton';\nimport Card from \"@mui/material/Card\";\nimport CardContent from \"@mui/material/CardContent\";\nimport { useParams } from \"react-router-dom\";\nimport Rating from '@mui/material/Rating';\nimport dayjs from \"dayjs\";\nimport ListItem from \"@mui/material/ListItem\";\nimport List from \"@mui/material/List\";\nimport Drawer from \"@mui/material/Drawer\";\nimport { DesktopDatePicker } from '@mui/x-date-pickers/DesktopDatePicker';\nimport Modal from '@mui/material/Modal';\nimport Box from '@mui/material/Box';\nimport { UserContext } from \"../../Contexts/UserContext/UserContext\";\nimport { useContext } from \"react\";\nimport { useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Listing() {\n  _s();\n  const api = `https://localhost:44305`;\n  const style = {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    width: 400,\n    bgcolor: 'background.paper',\n    borderRadius: 3,\n    boxShadow: 24,\n    p: 4\n  };\n  const {\n    id\n  } = useParams();\n  const [listingLoaded, setListingLoaded] = useState(false);\n  const {\n    user,\n    setUser,\n    isLoggedIn,\n    setIsLoggedIn\n  } = useContext(UserContext);\n  const [listing, setListing] = useState();\n  const [drawerOpen, setDrawerOpen] = useState(false);\n  const [checkin, setCheckin] = useState('');\n  const [checkout, setCheckout] = useState('');\n  const [failBooking, setFailBooking] = useState(false);\n  const [failBookingMessage, setFailBookingMessage] = useState('');\n  const [modalOpen, setModalOpen] = useState(false);\n  const [requiresLogin, setRequiresLogin] = useState(false);\n  const [loginErrorMessage, setLoginErrorMessage] = useState('');\n  const [loginChecked, setLoginChecked] = useState(false);\n  const [addToFavorites, setAddtoFavorites] = useState(false);\n\n  //whereas some pages rely on user existing to render at all, this page relies on isloggedin to render conditionally.\n  //That's why the verify login method is different. No re-routing occurs, just setting of isloggedin.\n\n  const getUser = id => {\n    fetch(`${api}/bnb/user/${id}`).then(response => response.json()).then(data => {\n      setUser(data.user);\n    }).then(() => {\n      setIsLoggedIn(true);\n    });\n  };\n  const verifyLogin = () => {\n    if (!user) {\n      //if user is null, parse the cookie. If there's no cookie, id will be NaN. So, either get user by Id if Id has value, or reroute to login.\n      var elements = document.cookie.split('=');\n      var id = Number(elements[1]);\n      if (!isNaN(id)) {\n        getUser(id);\n      } else {\n        setIsLoggedIn(false);\n      }\n    } else {\n      if (dayjs().isAfter(dayjs(user.logTime).add(6, 'hour'))) {\n        setIsLoggedIn(false);\n      } else {\n        setIsLoggedIn(true);\n      }\n    }\n  };\n  useEffect(() => {\n    verifyLogin();\n  }, []);\n  const getListing = () => {\n    fetch(`${api}/bnb/listing/${id}`).then(response => response.json()).then(data => {\n      setListing(data.listing);\n      console.log(data);\n    }).then(() => {\n      setListingLoaded(true);\n    });\n  };\n  useEffect(() => {\n    getListing();\n  }, []);\n  const showListingAmenities = () => {\n    return listing.amenities.map(function (val, index) {\n      return /*#__PURE__*/_jsxDEV(ListItem, {\n        children: [\"\\u2022 \", val]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }, this);\n    });\n  };\n  const showBookingDrawer = () => {\n    const isDisabled = date => {\n      for (let i = 0; i < listing.stays.length; i++) {\n        if (dayjs(date).isBetween(dayjs(listing.stays[i].startDate), dayjs(listing.stays[i].endDate), 'day', '[)')) {\n          return true;\n        } else {\n          return false;\n        }\n      }\n    };\n    return /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      sx: {\n        justifyContent: 'center',\n        display: 'flex',\n        width: 400\n      },\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 7,\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"h4\",\n          sx: {\n            mb: 3,\n            mt: 3\n          },\n          children: \"Book a Stay\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Divider, {\n          sx: {\n            backgroundColor: 'peachpuff'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          vairant: \"h6\",\n          sx: {\n            mt: 4,\n            mb: 1\n          },\n          children: \"When would you like to stay?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          sx: {\n            mt: 3,\n            mb: 1\n          },\n          children: \"Check-in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(DesktopDatePicker, {\n          label: \"Check-in\",\n          inputFormat: \"MM/DD/YYYY\",\n          value: checkin,\n          shouldDisableDate: isDisabled,\n          onChange: handleCheckinChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          sx: {\n            mt: 3,\n            mb: 1\n          },\n          children: \"Check-out\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(DesktopDatePicker, {\n          label: \"Check-out\",\n          inputFormat: \"MM/DD/YYYY\",\n          value: checkout,\n          shouldDisableDate: isDisabled,\n          onChange: handleCheckoutChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 17\n        }, this), showBookingMessage(), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          sx: {\n            \":hover\": {\n              bgcolor: \"peachpuff\"\n            },\n            mt: 3,\n            mr: 2,\n            backgroundColor: \"lightsalmon\"\n          },\n          onClick: confirmBooking,\n          children: \"Confirm\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          sx: {\n            \":hover\": {\n              bgcolor: \"gray\"\n            },\n            mt: 3,\n            backgroundColor: 'lightgray'\n          },\n          onClick: () => setDrawerOpen(false),\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }, this);\n  };\n  const handleCheckinChange = newValue => {\n    setCheckin(newValue);\n  };\n  const handleCheckoutChange = newValue => {\n    setCheckout(newValue);\n  };\n  const showBookingMessage = () => {\n    return failBooking && /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"caption\",\n      color: \"red\",\n      children: failBookingMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }, this);\n  };\n  const confirmBooking = () => {\n    if (dayjs(checkin).isAfter(dayjs(checkout))) {\n      setFailBooking(true);\n      setFailBookingMessage(\"Check-in date must be before check-out date.\");\n    } else if (dayjs(checkin).isBefore(dayjs()) || dayjs(checkin).isBefore(dayjs())) {\n      setFailBooking(true);\n      setFailBookingMessage(\"Check-in and check-out must be future dates.\");\n    } else if (checkin == \"\" && checkout != \"\" || checkin == null && checkout != null) {\n      setFailBooking(true);\n      setFailBookingMessage(\"Please select a check-in date.\");\n    } else if (checkout == \"\" && checkin != \"\" || checkout == null && checkin != null) {\n      setFailBooking(true);\n      setFailBookingMessage(\"Please select a check-out date.\");\n    } else {\n      const APIRequest = {\n        GuestId: user.id,\n        HostId: listing.hostId,\n        ListingId: Number(id),\n        StartDate: checkin,\n        EndDate: checkout\n      };\n      fetch(`${api}/bnb/addstay`, {\n        method: 'POST',\n        body: JSON.stringify(APIRequest),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => response.json()).then(data => {\n        console.log(data);\n        setDrawerOpen(false);\n        setModalOpen(true);\n      });\n    }\n  };\n  const showReviews = () => {\n    return listing.stays.map(function (val, index) {\n      return val.review != null && /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        s: 4,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            maxWidth: 300,\n            margin: 3\n          },\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              sx: {\n                fontSize: 14\n              },\n              children: val.review.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              color: \"text.secondary\",\n              children: [dayjs(val.startDate).format('MM/DD/YYYY'), \" - \", dayjs(val.endDate).format('MM/DD/YYYY')]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(Rating, {\n              name: \"user rating\",\n              value: val.review.rating,\n              disabled: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 27\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              children: [\"\\\"\", val.review.text, \"\\\"\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 17\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 13\n      }, this);\n    });\n  };\n  const handleClickBooking = () => {\n    if (!isLoggedIn) {\n      setRequiresLogin(true);\n      setLoginErrorMessage(\"You must log in to book a stay.\");\n    } else {\n      setDrawerOpen(true);\n    }\n    //before changing it, onClick for booking button was {() => setDrawerOpen(true)}\n  };\n\n  const showLoginError = () => {\n    return requiresLogin && /*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"caption\",\n      color: \"red\",\n      children: loginErrorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 9\n    }, this);\n  };\n  const handleClickFavorite = () => {\n    if (!isLoggedIn) {\n      setRequiresLogin(true);\n      setLoginErrorMessage(\"You must log in to add to favorites.\");\n    } else {\n      var APIRequest = {\n        UserId: user.id,\n        ListingId: listing.id\n      };\n      fetch(`${api}/bnb/favorite`, {\n        method: 'POST',\n        body: JSON.stringify(APIRequest),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => response.json()).then(data => {\n        console.log(data);\n        if (data.success) {\n          setAddtoFavorites(true);\n        }\n      });\n    }\n  };\n  const displayFavoriteIcon = () => {\n    var isFavorite = false;\n    if (isLoggedIn) {\n      for (let i = 0; i < user.favorites.length; i++) {\n        if (user.favorites[i] == id || addToFavorites) {\n          isFavorite = true;\n        }\n      }\n    }\n    return isFavorite ? /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      sx: {\n        justifyContent: 'center',\n        display: 'flex',\n        margin: 2\n      },\n      children: /*#__PURE__*/_jsxDEV(IconButton, {\n        children: /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n          sx: {\n            m: 2,\n            color: \"pink\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      sx: {\n        justifyContent: 'center',\n        display: 'flex',\n        margin: 2\n      },\n      children: /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: handleClickFavorite,\n        children: /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n          sx: {\n            m: 2\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 13\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: listingLoaded && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [displayFavoriteIcon(), /*#__PURE__*/_jsxDEV(Divider, {\n        sx: {\n          backgroundColor: 'peachpuff'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        sx: {\n          justifyContent: 'center',\n          display: 'flex',\n          margin: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12,\n          sx: {\n            justifyContent: 'center',\n            display: 'flex'\n          },\n          children: showLoginError()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 3,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            sx: {\n              mt: 1\n            },\n            variant: \"h6\",\n            children: listing.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            children: listing.location\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            sx: {\n              \":hover\": {\n                bgcolor: \"peachpuff\"\n              },\n              mt: 2,\n              backgroundColor: \"lightsalmon\"\n            },\n            onClick: handleClickBooking,\n            children: \"Book A Stay\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(Drawer, {\n            open: drawerOpen,\n            anchor: \"left\",\n            onClose: () => setDrawerOpen(false),\n            children: showBookingDrawer()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 1,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            sx: {\n              mt: 1\n            },\n            variant: \"h6\",\n            children: [\"$\", listing.rate, \"/Night\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        sx: {\n          justifyContent: 'center',\n          display: 'flex',\n          margin: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 4,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            children: [\"\\\"\", listing.description, \"\\\"\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {\n        sx: {\n          backgroundColor: 'peachpuff'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        sx: {\n          justifyContent: 'center',\n          display: 'flex',\n          margin: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 4,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            sx: {\n              mt: 2\n            },\n            variant: \"h6\",\n            children: \"Amenities\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(List, {\n            sx: {\n              width: '100%',\n              maxWidth: 500,\n              bgcolor: 'background.white',\n              position: 'relative',\n              overflow: 'auto',\n              maxHeight: 200,\n              '& ul': {\n                padding: 0\n              }\n            },\n            children: showListingAmenities()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 384,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Divider, {\n        sx: {\n          backgroundColor: 'peachpuff'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        sx: {\n          justifyContent: 'center',\n          display: 'flex',\n          margin: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 4,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            sx: {\n              mt: 2\n            },\n            variant: \"h6\",\n            children: \"Reviews\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 402,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          xs: 12\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 17\n        }, this), showReviews()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Modal, {\n        open: modalOpen,\n        onClose: () => setModalOpen(false),\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          sx: style,\n          children: /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h5\",\n            children: \"Booking confirmed! Enjoy your stay\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 412,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 343,\n    columnNumber: 9\n  }, this);\n}\n_s(Listing, \"p9UH5edYuOONexH0qCBvU7SJHzA=\", false, function () {\n  return [useParams];\n});\n_c = Listing;\nvar _c;\n$RefreshReg$(_c, \"Listing\");","map":{"version":3,"names":["Divider","Typography","Grid","useState","Button","FavoriteIcon","IconButton","Card","CardContent","useParams","Rating","dayjs","ListItem","List","Drawer","DesktopDatePicker","Modal","Box","UserContext","useContext","useEffect","jsxDEV","_jsxDEV","Listing","_s","api","style","position","top","left","transform","width","bgcolor","borderRadius","boxShadow","p","id","listingLoaded","setListingLoaded","user","setUser","isLoggedIn","setIsLoggedIn","listing","setListing","drawerOpen","setDrawerOpen","checkin","setCheckin","checkout","setCheckout","failBooking","setFailBooking","failBookingMessage","setFailBookingMessage","modalOpen","setModalOpen","requiresLogin","setRequiresLogin","loginErrorMessage","setLoginErrorMessage","loginChecked","setLoginChecked","addToFavorites","setAddtoFavorites","getUser","fetch","then","response","json","data","verifyLogin","elements","document","cookie","split","Number","isNaN","isAfter","logTime","add","getListing","console","log","showListingAmenities","amenities","map","val","index","children","fileName","_jsxFileName","lineNumber","columnNumber","showBookingDrawer","isDisabled","date","i","stays","length","isBetween","startDate","endDate","container","sx","justifyContent","display","item","xs","variant","mb","mt","backgroundColor","vairant","label","inputFormat","value","shouldDisableDate","onChange","handleCheckinChange","handleCheckoutChange","showBookingMessage","mr","onClick","confirmBooking","newValue","color","isBefore","APIRequest","GuestId","HostId","hostId","ListingId","StartDate","EndDate","method","body","JSON","stringify","headers","showReviews","review","s","maxWidth","margin","fontSize","username","format","name","rating","disabled","text","handleClickBooking","showLoginError","handleClickFavorite","UserId","success","displayFavoriteIcon","isFavorite","favorites","m","title","location","open","anchor","onClose","rate","description","overflow","maxHeight","padding","_c","$RefreshReg$"],"sources":["C:/repos/Seth repo share/dotnet-Seth-Repo-1/BnbProject/BnbWebAPI/BnbWebsite/src/Components/Listing/Listing.js"],"sourcesContent":["import { Divider, Typography } from \"@mui/material\";\r\nimport Grid from '@mui/material/Unstable_Grid2';\r\nimport { useState } from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport FavoriteIcon from '@mui/icons-material/Favorite';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport Card from \"@mui/material/Card\";\r\nimport CardContent from \"@mui/material/CardContent\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Rating from '@mui/material/Rating';\r\nimport dayjs from \"dayjs\";\r\nimport ListItem from \"@mui/material/ListItem\";\r\nimport List from \"@mui/material/List\";\r\nimport Drawer from \"@mui/material/Drawer\";\r\nimport { DesktopDatePicker } from '@mui/x-date-pickers/DesktopDatePicker';\r\nimport Modal from '@mui/material/Modal';\r\nimport Box from '@mui/material/Box';\r\nimport { UserContext } from \"../../Contexts/UserContext/UserContext\";\r\nimport { useContext } from \"react\";\r\nimport { useEffect } from \"react\";\r\n\r\n\r\nexport default function Listing(){\r\n\r\nconst api = `https://localhost:44305`;\r\n\r\nconst style = {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    transform: 'translate(-50%, -50%)',\r\n    width: 400,\r\n    bgcolor: 'background.paper',\r\n    borderRadius:3,\r\n    boxShadow: 24,\r\n    p: 4,\r\n  };\r\n\r\nconst {id} = useParams();\r\nconst [listingLoaded, setListingLoaded] = useState(false);\r\nconst {user, setUser, isLoggedIn, setIsLoggedIn} = useContext(UserContext);\r\nconst [listing, setListing] = useState();\r\nconst [drawerOpen, setDrawerOpen] = useState(false);\r\nconst [checkin, setCheckin] = useState('');\r\nconst [checkout, setCheckout] = useState('');\r\nconst [failBooking, setFailBooking] = useState(false);\r\nconst [failBookingMessage, setFailBookingMessage] = useState('');\r\nconst [modalOpen, setModalOpen] = useState(false);\r\nconst [requiresLogin, setRequiresLogin] = useState(false);\r\nconst [loginErrorMessage, setLoginErrorMessage] = useState('');\r\nconst [loginChecked, setLoginChecked] = useState(false);\r\nconst [addToFavorites, setAddtoFavorites] = useState(false);\r\n\r\n//whereas some pages rely on user existing to render at all, this page relies on isloggedin to render conditionally.\r\n//That's why the verify login method is different. No re-routing occurs, just setting of isloggedin.\r\n\r\nconst getUser = (id) => {\r\n\r\n    fetch(`${api}/bnb/user/${id}`)\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n        setUser(data.user);\r\n    })\r\n    .then(() => {\r\n        setIsLoggedIn(true);\r\n    });\r\n}\r\n\r\nconst verifyLogin = () => {\r\n\r\n    if(!user){\r\n        //if user is null, parse the cookie. If there's no cookie, id will be NaN. So, either get user by Id if Id has value, or reroute to login.\r\n        var elements = document.cookie.split('=');\r\n        var id = Number(elements[1]);\r\n\r\n        if(!isNaN(id)){\r\n            getUser(id);\r\n        }\r\n        else{\r\n            setIsLoggedIn(false);\r\n        }\r\n    }\r\n    else{\r\n        if(dayjs().isAfter(dayjs(user.logTime).add(6, 'hour'))){\r\n            setIsLoggedIn(false);\r\n        }\r\n        else{ \r\n            setIsLoggedIn(true);\r\n        }\r\n    } \r\n}\r\nuseEffect(() => {\r\n    verifyLogin();\r\n}, []);\r\n\r\nconst getListing = () => {\r\n\r\n    fetch(`${api}/bnb/listing/${id}`)\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n  \r\n        setListing(data.listing);\r\n        console.log(data);\r\n    })\r\n    .then(() => {\r\n        setListingLoaded(true);\r\n    });\r\n}\r\n  useEffect(() => {\r\n    getListing();\r\n}, []);\r\n\r\n\r\nconst showListingAmenities = () => {\r\n    \r\n    return listing.amenities.map(function(val, index){\r\n        return(      \r\n            <ListItem key={index}>\r\n                • {val}\r\n            </ListItem>           \r\n        )        \r\n    })\r\n}\r\nconst showBookingDrawer = () => {\r\n\r\n    const isDisabled = (date) => {\r\n\r\n        for(let i = 0; i < listing.stays.length; i++){\r\n\r\n            if(dayjs(date).isBetween(dayjs(listing.stays[i].startDate), dayjs(listing.stays[i].endDate), 'day', '[)')){\r\n                return true;\r\n            }\r\n            else{\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    return(\r\n        <Grid container sx={{justifyContent: 'center', display: 'flex', width:400}}>\r\n            <Grid item xs={7}>\r\n                <Typography variant=\"h4\" sx={{mb:3, mt:3}}>Book a Stay</Typography>\r\n                <Divider sx={{backgroundColor:'peachpuff'}}/>\r\n\r\n                <Typography vairant=\"h6\" sx={{mt:4, mb:1}}>When would you like to stay?</Typography>\r\n\r\n                <Typography sx={{mt:3, mb:1}}>Check-in</Typography>\r\n                <DesktopDatePicker\r\n                    label=\"Check-in\"\r\n                    inputFormat=\"MM/DD/YYYY\"\r\n                    value={checkin}\r\n                    shouldDisableDate={isDisabled}\r\n                    onChange={handleCheckinChange}\r\n                    />\r\n                <Typography sx={{mt:3, mb:1}}>Check-out</Typography>\r\n                <DesktopDatePicker\r\n                    label=\"Check-out\"\r\n                    inputFormat=\"MM/DD/YYYY\"\r\n                    value={checkout}\r\n                    shouldDisableDate={isDisabled}\r\n                    onChange={handleCheckoutChange}\r\n                    />\r\n                {showBookingMessage()}\r\n                <br/>\r\n                <Button variant=\"contained\" sx={{\":hover\": {\r\n                bgcolor: \"peachpuff\"}, mt:3, mr:2, backgroundColor:\"lightsalmon\"}} \r\n                onClick={confirmBooking}>Confirm\r\n                </Button>\r\n                <Button variant=\"contained\" sx={{\":hover\": {\r\n                bgcolor: \"gray\"}, mt:3, backgroundColor:'lightgray'}} \r\n                onClick={() => setDrawerOpen(false)}>Cancel</Button>\r\n            </Grid>  \r\n        </Grid>\r\n    )\r\n}\r\nconst handleCheckinChange = (newValue) => {\r\n    setCheckin(newValue);\r\n}\r\nconst handleCheckoutChange = (newValue) => {\r\n    setCheckout(newValue);\r\n}\r\nconst showBookingMessage = () => {\r\n\r\n    return(\r\n        failBooking &&\r\n        <Typography variant=\"caption\" color=\"red\">{failBookingMessage}</Typography>\r\n    )\r\n}\r\nconst confirmBooking = () => {\r\n\r\n    if(dayjs(checkin).isAfter(dayjs(checkout))){\r\n\r\n        setFailBooking(true);\r\n        setFailBookingMessage(\"Check-in date must be before check-out date.\");\r\n    }\r\n    else if(dayjs(checkin).isBefore(dayjs()) || dayjs(checkin).isBefore(dayjs())){\r\n\r\n        setFailBooking(true);\r\n        setFailBookingMessage(\"Check-in and check-out must be future dates.\");\r\n    }\r\n    else if((checkin == \"\" && checkout != \"\") || (checkin == null && checkout != null)){\r\n        setFailBooking(true);\r\n        setFailBookingMessage(\"Please select a check-in date.\");\r\n    }\r\n    else if((checkout == \"\" && checkin != \"\") || (checkout == null && checkin != null)){\r\n        setFailBooking(true);\r\n        setFailBookingMessage(\"Please select a check-out date.\");\r\n    }\r\n    else{\r\n\r\n        const APIRequest = {\r\n            GuestId: user.id,\r\n            HostId: listing.hostId,\r\n            ListingId: Number(id),\r\n            StartDate: checkin,\r\n            EndDate: checkout,\r\n        }\r\n\r\n        fetch(`${api}/bnb/addstay`, {\r\n            method: 'POST',\r\n            body: JSON.stringify(APIRequest),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n                console.log(data);\r\n                setDrawerOpen(false);\r\n                setModalOpen(true);\r\n            });\r\n    }\r\n}\r\nconst showReviews = () => {\r\n    \r\n    return listing.stays.map(function(val, index){\r\n\r\n        return(\r\n\r\n            val.review != null &&\r\n            <Grid item s={4} key={index}>\r\n                <Card sx={{ maxWidth: 300, margin:3}}>\r\n                    <CardContent>\r\n                      <Typography sx={{ fontSize: 14 }}>\r\n                        {val.review.username}\r\n                      </Typography>\r\n                      <Typography variant=\"body1\" color=\"text.secondary\">\r\n                        {dayjs(val.startDate).format('MM/DD/YYYY')} - {dayjs(val.endDate).format('MM/DD/YYYY')}\r\n                      </Typography>\r\n                          <Rating\r\n                          name=\"user rating\"\r\n                          value={val.review.rating}\r\n                          disabled\r\n                          />\r\n                      <Typography variant=\"body2\">\r\n                        \"{val.review.text}\"\r\n                      </Typography>\r\n                    </CardContent>\r\n                </Card>\r\n            </Grid>\r\n\r\n        )\r\n    })\r\n}\r\nconst handleClickBooking = () => {\r\n\r\n    if(!isLoggedIn){\r\n        setRequiresLogin(true);\r\n        setLoginErrorMessage(\"You must log in to book a stay.\");\r\n    }\r\n    else{\r\n        setDrawerOpen(true);\r\n    }\r\n    //before changing it, onClick for booking button was {() => setDrawerOpen(true)}\r\n}\r\nconst showLoginError = () => {\r\n    return(\r\n        requiresLogin &&\r\n        <Typography variant=\"caption\" color=\"red\">{loginErrorMessage}</Typography>\r\n    )\r\n}\r\nconst handleClickFavorite = () => {\r\n\r\n    if(!isLoggedIn){\r\n        setRequiresLogin(true);\r\n        setLoginErrorMessage(\"You must log in to add to favorites.\");\r\n    }\r\n    else{\r\n\r\n        var APIRequest = {\r\n            UserId: user.id,\r\n            ListingId: listing.id\r\n        };\r\n\r\n        fetch(`${api}/bnb/favorite`, {\r\n            method: 'POST',\r\n            body: JSON.stringify(APIRequest),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n            .then((response) => response.json())\r\n            .then((data) => {\r\n                console.log(data);\r\n                \r\n                if(data.success){\r\n                    setAddtoFavorites(true);\r\n                }\r\n            });\r\n\r\n    }\r\n}\r\nconst displayFavoriteIcon = () => {\r\n\r\n    var isFavorite = false;\r\n\r\n    if(isLoggedIn){\r\n\r\n        for(let i = 0; i < user.favorites.length; i++){\r\n\r\n            if(user.favorites[i] == id || addToFavorites){\r\n                isFavorite = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    return(\r\n        isFavorite \r\n        ?   <Grid container sx={{justifyContent: 'center', display: 'flex', margin:2}}>\r\n                <IconButton>\r\n                    <FavoriteIcon sx={{m:2, color:\"pink\"}}/>\r\n                </IconButton>\r\n            </Grid>\r\n        :   <Grid container sx={{justifyContent: 'center', display: 'flex', margin:2}}>\r\n                <IconButton onClick={handleClickFavorite}>\r\n                    <FavoriteIcon sx={{m:2}}/>\r\n                </IconButton>\r\n            </Grid>\r\n    )\r\n}\r\n    return(\r\n\r\n        <div>\r\n\r\n            {/*here go the pics*/}\r\n            {listingLoaded && \r\n            <div>\r\n            {displayFavoriteIcon()}\r\n\r\n            <Divider sx={{backgroundColor:'peachpuff'}}/>\r\n\r\n            <Grid container sx={{justifyContent: 'center', display: 'flex', margin:2}}>\r\n                <Grid item xs={12} sx={{justifyContent: 'center', display: 'flex'}}>\r\n                    {showLoginError()}\r\n                </Grid>\r\n                <Grid item xs={3}>\r\n                    <Typography sx={{mt:1}} variant='h6'>{listing.title}</Typography>\r\n                    <Typography variant='subtitle1'>{listing.location}</Typography>\r\n                    <Button variant=\"contained\" sx={{\":hover\": {\r\n                        bgcolor: \"peachpuff\"}, mt:2, backgroundColor:\"lightsalmon\"}}\r\n                        onClick={handleClickBooking}>\r\n                        Book A Stay\r\n                    </Button>    \r\n\r\n                    <Drawer open={drawerOpen} anchor={\"left\"} onClose={() => setDrawerOpen(false)}>\r\n                        {showBookingDrawer()}\r\n                    </Drawer>\r\n                </Grid>\r\n                <Grid item xs={1}>\r\n                    <Typography sx={{mt:1}} variant='h6'>${listing.rate}/Night</Typography>\r\n                </Grid>\r\n            </Grid>\r\n            <Grid container sx={{justifyContent: 'center', display: 'flex', margin:2}}>\r\n                <Grid item xs={4}>\r\n                    <Typography variant='body1'>\"{listing.description}\"</Typography>           \r\n                </Grid>\r\n            </Grid>\r\n\r\n            <Divider sx={{backgroundColor:'peachpuff'}}/>\r\n\r\n            <Grid container sx={{justifyContent: 'center', display: 'flex', margin:2}}> \r\n                <Grid item xs={4}>\r\n                    <Typography sx={{mt:2}} variant='h6'>Amenities</Typography>\r\n                    <List sx={{\r\n                        width: '100%',\r\n                        maxWidth: 500,\r\n                        bgcolor: 'background.white',\r\n                        position: 'relative',\r\n                        overflow: 'auto',\r\n                        maxHeight: 200,\r\n                        '& ul': { padding: 0 },\r\n                        }}>\r\n                        {showListingAmenities()}\r\n                        </List>\r\n                </Grid>\r\n            </Grid>\r\n\r\n            <Divider sx={{backgroundColor:'peachpuff'}}/>\r\n\r\n            <Grid container sx={{justifyContent: 'center', display: 'flex', margin:2}}> \r\n                <Grid item xs={4}>\r\n                    <Typography sx={{mt:2}} variant='h6'>Reviews</Typography>\r\n                </Grid>\r\n                <Grid item xs={12}/>\r\n                {showReviews()}\r\n            </Grid>\r\n            <Modal\r\n              open={modalOpen}\r\n              onClose={() => setModalOpen(false)}\r\n            >\r\n                <Box sx={style}>\r\n                    <Typography variant=\"h5\">Booking confirmed! Enjoy your stay</Typography>\r\n                </Box>\r\n            </Modal>\r\n\r\n            </div>}\r\n        </div>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}